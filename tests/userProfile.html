<!DOCTYPE html>
<html>
  <head>
    <title>Shopping Cart Objects</title>
       <script src="../js/User_Profile.js"></script>
         <script>
        //temp solution, will draw name from shared array when connected
        var gameList = [
            [100, "PLAYERUNKNOWN'S BATTLEGROUNDS"],
            [101, "Far Cry 5"],
            [102, "Ni no Kuni II: Revenant Kingdom"],
            [103, "Grand Theft Auto V"],
            [104, "Tom Clancy's Ghost Recon Wildlands"],
            [105, "Warhammer: Verintide 2"],
            [106, "Divinity: Original Sin 2"],
            [107, "Rocket League"],
            [108, "Counter-Strike: Global Offensive"],
            [109, "Football Manager 2018"]
        ];
        
        //temp userList
        var userList = [];
        var users= []
        var logedUserIndex;
        var currentUserID = 0;
       
          for (var i = 0; i < localStorage.length; i++)
        {

                //add to userList array, if begins with "user-"
                if (localStorage.key(i).includes("user-"))
                {
                    var username = (localStorage.key(i)).substring(5);
                    userList[currentUserID] = [currentUserID++, username, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                }
        } 
        //find user index - setting to local storage, not sure if I
        function userSearch()
        {
            for (var i = 0; i < userList.length; i++)
            {
                //I think this works, not sure how to test it rn
                alert(localStorage.getItem("LoggedInUser"))
                if (userList[i][1] == localStorage.getItem("LoggedInUser"))
                {
                     logedUserIndex = userList[i][0];
                    // alert(logedUserIndex);
                }
            }
        }
        userSearch();

        //assigning saved users
        for (i=0; i < userList.length; i++)
        {      //will need to be modified to allow for new user
            users[i] = new User_Profile(userList[0][0], userList[0][1]);
        }

    </script>
  </head>
  <body>
    <h1>Shopping cart tests</h1>
    <p><i>This looks like an account profile page, object code might be useable elsewhere. Unsure how to implement user account creation.</body>i></p>
        <p id="objTest1"><script>document.getElementById("objTest1").innerHTML = users[logedUserIndex].toString();</script></p>
        <p id="userCheckList"><script> </script></p>
        <input id="checkBox00" type="checkbox">PUBG
        </br><input id="checkBox01" type="checkbox">Farcry 5
        </br><input id="checkBox02" type="checkbox">Ni no Kuni II
        </br><input id="checkBox03" type="checkbox">GTAV 
        </br><input id="checkBox04" type="checkbox">Ghost Recon
        </br><input id="checkBox05" type="checkbox">Verintide II 
        </br><input id="checkBox06" type="checkbox">Divinity II
        </br><input id="checkBox07" type="checkbox">Rocker League 
        </br><input id="checkBox08" type="checkbox">Counter-Strike 
        </br><input id="checkBox09" type="checkbox">Football Manager 2018 
       <!-- Problem with how this button calls the method, variables are out of scope I think if not created inside constructor -->
        <script>users[0].libraryToString()</script>
        </br><button onclick="users[logedUserIndex].updateLibrary()">Update</button>

</body>

</html>

